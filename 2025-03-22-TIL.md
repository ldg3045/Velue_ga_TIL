# GIT TIL 87 - 기술적 의사결정(ADR) 작성법

<br><br>

## 1. 기술적 의사결정 문서란?

기술적 의사결정 문서(Architecture Decision Records, ADR)는 소프트웨어 개발 과정에서 내린 중요한 기술적 선택과 그 이유를 기록하는 문서이다. 이는 프로젝트의 역사를 이해하고, 새로운 팀원의 온보딩을 돕고, 미래의 결정에 참고자료로 활용될 수 있다.

### 1-1. ADR의 중요성

- **지식 전달**: 팀원 간, 혹은 미래의 팀원에게 왜 특정 결정을 내렸는지 전달
- **의사결정 품질 향상**: 결정 과정을 체계화하여 더 나은 의사결정 유도
- **변경 관리**: 시간이 지나 상황이 변할 때 다시 검토할 수 있는 기준점 제공
- **조직 학습**: 유사한 상황에서 과거의 경험에서 배울 수 있음
- **기술 부채 관리**: 특정 결정이 가져올 수 있는 기술 부채와 그 관리 방안 문서화

<br>

## 2. ADR 작성 구조

효과적인 ADR은 다음과 같은 표준 구조를 따른다:

### 2-1. 기본 구조

1. **제목**: 결정 내용을 간결하게 요약 (번호 포함 권장)
2. **상태**: 제안됨, 수락됨, 거부됨, 대체됨, 폐기됨 등
3. **맥락**: 이 결정이 필요한 배경과 현재 상황
4. **결정**: 실제로 내린 결정 내용
5. **결과**: 이 결정으로 인한 영향, 장단점, 리스크
6. **대안**: 고려했지만 선택하지 않은 다른 옵션들과 그 이유
7. **참여자**: 의사결정에 참여한 사람들

### 2-2. 상태 정의

- **제안됨(Proposed)**: 결정이 제안되었지만 아직 합의되지 않음
- **수락됨(Accepted)**: 팀이 결정을 수락하고 구현 예정
- **구현됨(Implemented)**: 결정이 실제로 구현됨
- **거부됨(Rejected)**: 결정이 검토 후 거부됨
- **대체됨(Superseded)**: 새로운 결정으로 대체됨 (대체한 ADR 번호 명시)
- **폐기됨(Deprecated)**: 더 이상 관련 없거나 유효하지 않음

<br>

## 3. ADR 작성 지침

### 3-1. 작성 시 고려사항

- **간결하게 작성**: 일반적으로 1-2페이지 분량으로 핵심만 담아 작성
- **객관적 사실 중심**: 주관적 의견보다 객관적 사실과 데이터 기반으로 작성
- **미래 독자 고려**: 현재 팀뿐만 아니라 미래에 이 문서를 읽을 사람을 고려
- **기술적 용어 정의**: 모호한 용어는 명확히 정의하여 오해 방지
- **버전 관리**: ADR은 코드와 함께 버전 관리 시스템(Git 등)에 저장

### 3-2. 추가 팁

- **일관된 형식 유지**: 모든 ADR이 동일한 형식을 따르도록 템플릿 사용
- **연결성 유지**: 다른 ADR과 관련이 있는 경우 상호 참조
- **시간 정보 포함**: 언제 결정이 이루어졌는지 명시
- **검토 주기 설정**: 주기적으로 검토할 필요가 있는 결정에는 검토 일정 추가

<br>

## 4. 실제 ADR 템플릿 예시

```markdown
# ADR-001: MongoDB를 주 데이터베이스로 선택

## 상태

수락됨 (2025-03-15)

## 맥락

우리 프로젝트는 대량의 비정형 데이터를 처리해야 하며, 스키마가 자주 변경될 것으로 예상된다. 
또한 수평적 확장성과 빠른 개발 속도가 중요한 요구사항이다.

현재 검토 중인 데이터베이스 옵션:
- 관계형 DB (PostgreSQL, MySQL)
- 문서형 DB (MongoDB, CouchDB)
- 키-값 저장소 (Redis, DynamoDB)

## 결정

MongoDB를 프로젝트의 주 데이터베이스로 사용한다.

## 결과

### 긍정적 결과
- 스키마 유연성으로 빠른 프로토타이핑과 변경 가능
- JSON 형태의 데이터를 직접 저장하여 개발 편의성 증가
- 수평적 확장이 용이함
- 대부분의 팀원이 이미 MongoDB 경험이 있음

### 부정적 결과
- 트랜잭션 처리가 RDBMS에 비해 제한적
- 복잡한 조인 쿼리의 어려움
- 데이터 일관성 보장이 더 어려움

### 리스크
- 데이터 무결성이 중요한 영역에서는 추가 검증 로직 필요
- 쿼리 최적화에 대한 추가 학습 필요

## 대안

### PostgreSQL
- 장점: 강력한 트랜잭션, ACID 준수, 복잡한 쿼리 지원
- 단점: 스키마 변경의 어려움, 수평적 확장 제한
- 거부 이유: 초기 개발 단계에서 스키마 유연성이 더 중요하다고 판단

### DynamoDB
- 장점: 완전 관리형 서비스, 예측 가능한 성능
- 단점: AWS 종속성, 비용 구조 복잡성
- 거부 이유: 클라우드 중립성 유지 필요성

## 참여자

- 김개발 (백엔드 리드)
- 박디비 (데이터 엔지니어)
- 이클라 (CTO)
```

<br>

## 5. 기술적 의사결정이 필요한 상황

다음과 같은 상황에서 ADR 작성을 고려해볼 수 있다:

- **아키텍처 패턴 선택**: 모놀리식 vs 마이크로서비스
- **기술 스택 결정**: 프레임워크, 언어, 라이브러리 선택
- **데이터 저장소 선택**: 데이터베이스 종류, 캐싱 전략
- **인증/인가 메커니즘**: OAuth, JWT, 세션 기반 등
- **배포 및 운영 전략**: CI/CD 파이프라인, 컨테이너화 여부
- **API 설계**: REST, GraphQL, gRPC 등
- **성능 최적화 전략**: 캐싱, 인덱싱, 샤딩 전략

<br>

## 6. 기술적 의사결정 프로세스

효과적인 기술적 의사결정을 위한 프로세스:

1. **문제 정의**: 해결하려는 문제나 충족해야 할 요구사항 명확화
2. **제약조건 식별**: 기술, 시간, 비용, 인력 등의 제약조건 파악
3. **대안 탐색**: 가능한 모든 대안 조사
4. **평가 기준 설정**: 대안을 평가할 객관적 기준 설정
   - 기능적 요구사항 충족도
   - 성능/확장성
   - 유지보수성
   - 보안
   - 비용
   - 팀 역량
5. **각 대안 평가**: 설정한 기준에 따라 각 대안 평가
6. **의사결정**: 평가 결과를 바탕으로 최적의 선택
7. **문서화**: ADR로 결정 과정과 결과 기록
8. **구현 및 검증**: 결정 사항 구현 후 예상대로 작동하는지 검증
9. **필요시 재평가**: 상황 변화에 따라 결정 재검토

<br>

## 7. 결론

기술적 의사결정 문서(ADR)는 단순한 문서 작성 이상의 의미가 있다. 이는 체계적인 의사결정 프로세스를 촉진하고, 지식을 공유하며, 미래의 의사결정에 도움을 준다. 일관된 형식과 명확한 내용으로 작성된 ADR은 프로젝트의 중요한 자산이 될 수 있다.

가장 중요한 것은 실제로 사용하는 것이다. 모든 결정을 문서화할 필요는 없지만, 중요한 아키텍처 결정은 반드시 ADR로 남겨두어 팀의 지식 자산으로 활용하자.

<br><br>

---

<br><br>
