# GIT TIL 85 - 클라우드 기반 서비스 아키텍처 분석

<br><br>

## 서비스 아키텍처 개요

아래 이미지는 현재 구현된 아키텍처의 전체 구조를 보여준다.

![Image](https://github.com/user-attachments/assets/d9ec3c4a-57fb-40c9-8ab3-fa7650a23d9f)

<br>

## 주요 컴포넌트 분석

### 1. Front Door (네트워크 진입점)

- **역할**: 사용자의 첫 접점으로 방화벽 역할을 수행
- **기능**: 트래픽 라우팅, 부하 분산, DDos 보호 등 네트워크 수준의 보안 담당
- **장점**: DB 및 보안 리소스에 대한 접근 제어 용이

> **참고**: Azure Front Door는 글로벌 로드 밸런서로 작동하며, 웹 애플리케이션의 성능과 가용성을 향상시키는 서비스다.

<br>

### 2. 백엔드 환경 (PaaS)

- **구성요소**: 
  - Django 기반 백엔드 서버
  - Linux 기반 App Service

- **특징**: 
  - PaaS(Platform as a Service) 환경에서 운영 중
  - IaaS(EC2 등)보다 관리 부담이 적음

### 2-1. PaaS(파스)는?
```
Infrastructure as a Service(IaaS)와 
Software as a Service(SaaS) 사이에 위치한 서비스 모델이다. 
```
- IaaS가 가상 머신, 스토리지, 네트워크 등 인프라를 제공
- SaaS가 완전한 애플리케이션을 제공하는 반면, <br>
  PaaS는 애플리케이션을 개발, 실행, 관리할 수 있는 플랫폼을 제공한다. 
- 개발자는 인프라 관리 대신 애플리케이션 개발에 집중할 수 있다.


<br>

### 3. 프론트엔드

- **구현방식**: Django 내에서 관리 (템플릿 기반)
- **참고**: 일반적으로 현대 웹 서비스는 분리된 프론트엔드(React, Vue, Angular 등)를 사용하는 경우가 많으나, 이 서비스에서는 프론트엔드를 분리하지 않고 Django의 템플릿 시스템을 활용


<br>

### 4. Azure 관리 리소스

- **데이터베이스**: PostgreSQL (관리형 서비스)
- **스토리지**: Azure Storage Account를 통한 앱 서비스 자원 관리
- **Key Vault**:
  - 중요 자격 증명 및 비밀 정보 보관 (환경 변수 등)
  - env 파일보다 강화된 보안 제공
  - 허가된 사용자/서비스만 접근 가능
  - 배포 환경에서만 Key Vault와 연결됨
  - 개인정보 유출 방지 및 해킹 차단 기능

### 4-1. Key Vault는?

- 암호화 키, 비밀, 인증서 등의 관리를 위한 서비스로, <br>
FIPS 140-2 Level 2 인증을 받은 하드웨어 보안 모듈(HSM)으로 보호된다. <br>
- 액세스 제어, 감사 로깅, 모니터링 기능도 제공한다.

<br>

### 5. 온프레미스 AI 환경

- **목적**: Azure에서 AI 처리 시 서버 부하 및 비용 증가 문제 해결 (월 35~40만원 정도)
- **구성**:
  - Fast API 기반 서비스
  - 허깅페이스(HuggingFace) 기반 모델 활용
  - 이미지 평가 모델 구현

- **기술적 이점**:
  - Fast API: 비동기 처리에 최적화 (Django는 주로 동기식 처리)
  - 속도 측면에서 Django보다 우수한 성능

> - **HuggingFace**: AI 모델 및 데이터셋을 공유하는 커뮤니티 플랫폼. <br>
> 특히 NLP, 컴퓨터 비전 모델을 쉽게 가져와 사용할 수 있다.
> - **PyTorch**: Facebook에서 개발한 오픈소스 딥러닝 프레임워크로, <br>
> 동적 계산 그래프와 직관적인 디버깅 기능이 특징이다.

### 6. AI 로직

- **LangChain**: 
  - 백엔드 로직 자동화를 위한 에이전트 역할
  - 모델 저장 및 평가 기능 담당


### 7. 배포 및 운영

- **CI/CD**: GitHub Actions를 통한 자동화된 배포 및 운영
  - 코드 변경 시 자동 테스트 및 배포
  - 지속적인 배포나 운영을 자동으로 해줌

<br>

## 아키텍처 개선 제안
- **CDN 활용**: 정적 자원 전송 최적화를 위한 CDN 서비스 통합


<br>

## 클라우드 서비스 모델 비교

| 특성 | IaaS | PaaS | SaaS |
|------|------|------|------|
| 관리 범위 | 사용자가 OS부터 관리 | 플랫폼 제공, 애플리케이션만 관리 | 모든 것이 관리됨 |
| 유연성 | 높음 | 중간 | 낮음 |
| 제어 수준 | 높음 | 중간 | 낮음 |
| 사용 사례 | 커스텀 인프라 | 애플리케이션 개발 | 즉시 사용 가능한 솔루션 |
| 예시 | AWS EC2, Azure VM | Azure App Service, Heroku | Office 365, Salesforce |

<br>

## 8. 결론을 요약하자면

- 현재 구현된 아키텍처는 PaaS와 온프레미스 하이브리드 모델을 통해 <br>
   비용과 성능의 균형을 맞추고 있다. <br>
- 특히 AI를 통해 자동화된 처리 작업이 많다보니<br>
  이를 온프레미스에서 처리하여 클라우드 비용을 최적화하고 있다. <br>
- Key Vault를 통한 보안 강화와 GitHub Actions를 통한 자동화된 배포 체계는 <br>
   현대적인 DevOps 접근 방식으로 반영할 계획이다.

- 우리는 key vault를 통해 azure key value storage에 저장된 키를 관리하고 <br>
key manager를 통해 보안 강화를 위해 신경을 썼다.

<br>

---
