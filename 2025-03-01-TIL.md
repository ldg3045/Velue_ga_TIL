# GIT TIL 66 - OpenAI API ì‹œì‘í•˜ê¸°

<br><br>

## 1. OpenAI API ê¸°ë³¸ ì„¤ì •

### 1-1. API í‚¤ ë°œê¸‰
1. OpenAI í”Œë«í¼ ê°€ì…
2. API í‚¤ ìƒì„±: https://platform.openai.com/api-keys
3. API í‚¤ ì•ˆì „í•˜ê²Œ ë³´ê´€

### 1-2. í™˜ê²½ ì„¤ì •
```bash
# Python í™˜ê²½ ì„¤ì •
pip install openai
```

```python
# .env íŒŒì¼ ìƒì„±
OPENAI_API_KEY='your-api-key-here'
```

<br><br>

## 2. ê¸°ë³¸ API í˜¸ì¶œ

### 2-1. í…ìŠ¤íŠ¸ ìƒì„± ì˜ˆì œ
```python
from openai import OpenAI
import os
from dotenv import load_dotenv

# í™˜ê²½ë³€ìˆ˜ ë¡œë“œ
load_dotenv()

# OpenAI í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
client = OpenAI(api_key=os.getenv('OPENAI_API_KEY'))

# API í˜¸ì¶œ
response = client.chat.completions.create(
    model="gpt-3.5-turbo",
    messages=[
        {"role": "system", "content": "ë‹¹ì‹ ì€ ë„ì›€ì´ ë˜ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤."},
        {"role": "user", "content": "íŒŒì´ì¬ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?"}
    ]
)

print(response.choices[0].message.content)
```

### 2-2. ì£¼ìš” íŒŒë¼ë¯¸í„°
- model: ì‚¬ìš©í•  ëª¨ë¸ (gpt-3.5-turbo, gpt-4 ë“±)
- messages: ëŒ€í™” ë‚´ìš©
- temperature: ì‘ë‹µì˜ ì°½ì˜ì„± ì¡°ì ˆ (0~2)
- max_tokens: ìµœëŒ€ í† í° ìˆ˜

<br><br>

## 3. ìŠ¤íŠ¸ë¦¼ ì‘ë‹µ ì²˜ë¦¬

### 3-1. ìŠ¤íŠ¸ë¦¬ë° API í˜¸ì¶œ
```python
stream = client.chat.completions.create(
    model="gpt-3.5-turbo",
    messages=[{"role": "user", "content": "ê¸´ ì´ì•¼ê¸°ë¥¼ í•´ì£¼ì„¸ìš”"}],
    stream=True
)

for chunk in stream:
    if chunk.choices[0].delta.content is not None:
        print(chunk.choices[0].delta.content, end="")
```

<br><br>

## 4. ì—ëŸ¬ ì²˜ë¦¬

### 4-1. ê¸°ë³¸ ì—ëŸ¬ ì²˜ë¦¬
```python
from openai import OpenAIError

try:
    response = client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[{"role": "user", "content": "ì•ˆë…•í•˜ì„¸ìš”"}]
    )
except OpenAIError as e:
    print(f"OpenAI API ì—ëŸ¬: {e}")
```

<br><br>

## ğŸ’¡ API ì‚¬ìš© íŒ
1. í† í° ê´€ë¦¬
   - ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
   - ë¹„ìš© ìµœì í™”

2. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
   - ëª…í™•í•œ ì§€ì‹œì‚¬í•­
   - ì»¨í…ìŠ¤íŠ¸ ì œê³µ

3. ì‘ë‹µ ì²˜ë¦¬
   - ì—ëŸ¬ ì²˜ë¦¬
   - ì‘ë‹µ íŒŒì‹±

<br><br>

## ğŸ¯ ì‹¤ì œ í™œìš© ì‚¬ë¡€

### 1. ì±—ë´‡ êµ¬í˜„
```python
def chat_with_gpt(messages):
    try:
        response = client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=messages
        )
        return response.choices[0].message.content
    except Exception as e:
        return f"ì—ëŸ¬ ë°œìƒ: {str(e)}"

# ëŒ€í™” ê¸°ë¡
conversation = [
    {"role": "system", "content": "ë‹¹ì‹ ì€ ì¹œì ˆí•œ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤."},
    {"role": "user", "content": "ì˜¤ëŠ˜ ë‚ ì”¨ëŠ” ì–´ë•Œìš”?"}
]

response = chat_with_gpt(conversation)
print(response)
```

<br><br>

## âš  ì£¼ì˜ì‚¬í•­
1. API í‚¤ ë³´ì•ˆ
   - í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©
   - .gitignore ì„¤ì •

2. ìš”ì²­ ì œí•œ
   - Rate limiting ê³ ë ¤
   - í† í° ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

3. ë¹„ìš© ê´€ë¦¬
   - ì‚¬ìš©ëŸ‰ ì¶”ì 
   - ì˜ˆì‚° ì„¤ì •

<br><br>

---
