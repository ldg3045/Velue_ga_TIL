# Git TIL 08 <br><br>

### 1. Pandas 라이브러리
- 데이터 분석을 위한 라이브러리
- 다양한 타입의 데이터 저장 가능 (숫자, 문자, 날짜 등)
- 엑셀과 비슷한 형태의 데이터 처리
<br>
### 2. 데이터프레임
- 2차원 표 형태의 데이터 구조
- 엑셀 시트와 비슷한 형태
- 열(columns)과 행(rows)으로 구성
<br>
### 3. 데이터프레임 생성 방법
- {} : 딕셔너리를 이용
- [] : 리스트를 이용
- pd.DataFrame() : 판다스 내장 함수를 이용
<br>

```python
import pandas as pd

# 동일한 데이터프레임 생성
data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. 특정 열 선택
print("성적 열만 선택:")
print(df['성적'])

# 2. 여러 열 선택
print("\n이름과 성적 열 선택:")
print(df[['이름', '성적']])

# 3. 조건으로 데이터 선택
print("\n성적이 90점 이상인 학생:")
print(df[df['성적'] >= 90])



기본 데이터프레임:
    이름  나이  성적 합격여부
0  김철수  25  85   합격
1  이영희  28  92   합격
2  박민수  32  78  불합격
3  최지은  24  96   합격

데이터프레임 정보:
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 4 entries, 0 to 3 # 총 4개의 행
Data columns (total 4 columns): #총 4개의 열
 #   Column  Non-Null Count  Dtype   (non-null count : 각 열의 데이터 개수)
---  ------  --------------  ----- 
 0   이름      4 non-null      object # object 타입 (문자열)
 1   나이      4 non-null      int64  # int64 타입 (정수)
 2   성적      4 non-null      int64  # int64 타입 (정수)
 3   합격여부    4 non-null      object # object 타입 (문자열)
dtypes: int64(2), object(2) # int64 타입 2개, object 타입 2개
memory usage: 260.0+ bytes # 메모리 사용량
None # 결측치 없음
```
1-1. **Null이란?**
- 비어있는 값
- 결측값(missing value)
- 데이터가 없는 상태

1-2. **Non-Null이란?**
- Null이 아닌 값
- 실제 데이터가 있는 상태

1-3. **Non-Null Count란?**
- 각 열에서 실제 데이터가 있는 개수

1-4. **info() 함수란?** 
- DataFrame의 기본 정보를 보여주는 함수<br>
- **전체 행**의 수
- 각 열의 **데이터 타입**
- **결측치**(비어있는 값) 수
- **메모리 사용량** 등을 보여준다.
<br>


### 2.데이터프레임의 분석 방법
```python
import pandas as pd

# 데이터프레임 생성
data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. 기본 통계량 확인
print("기본 통계량:")
print(df.describe())
# describe()는 숫자형 데이터(나이, 성적)에 대해서만 통계를 보여줍니다

# 2. 특정 열의 평균
print("\n나이 평균:", df['나이'].mean())
print("성적 평균:", df['성적'].mean())

# 3. 합격/불합격 개수 세기
print("\n합격 현황:")
print(df['합격여부'].value_counts())
```
<br>

```python
기본 통계량:
         나이         성적
count   4.000000   4.000000
mean   27.250000  87.750000
std     3.593976   7.932003
min    24.000000  78.000000
25%    24.750000  83.250000
50%    26.500000  88.500000
75%    29.000000  93.000000
max    32.000000  96.000000

나이 평균: 27.25
성적 평균: 87.75

합격 현황:
합격여부
합격     3
불합격    1
Name: count, dtype: int64
```
<br>

### 3. 데이터 필터링(조건에 맞는 데이터 선택)
```python
import pandas as pd

# 동일한 데이터프레임 사용
data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. 조건으로 데이터 필터링
print("90점 이상인 학생:")
high_score = df[df['성적'] >= 90]
print(high_score)

# 2. 여러 조건 사용
print("\n나이가 25세 이상이고 성적이 80점 이상인 학생:")
condition = (df['나이'] >= 25) & (df['성적'] >= 80)
result = df[condition]
print(result)
```

```python
90점 이상인 학생:
    이름  나이  성적 합격여부
0  김철수  25  85   합격
1  이영희  28  92   합격
3  최지은  24  96   합격

나이가 25세 이상이고 성적이 80점 이상인 학생:
    이름  나이  성적 합격여부
0  김철수  25  85   합격
1  이영희  28  92   합격
3  최지은  24  96   합격
```
<br>

### 4. 데이터 정렬과 그룹화

```python
import pandas as pd

# 동일한 데이터프레임 사용
data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data) # 데이터프레임 생성

# 1. 데이터 정렬                 
print("성적 기준 내림차순 정렬:") # sort_values() : 정렬
print(df.sort_values('성적', ascending=False)) # =false는 반대인 내림차순

# 2. 합격/불합격 그룹별 평균 (숫자 데이터만)
print("\n합격 여부에 따른 평균 성적과 나이:") # groupby() : 그룹화
print(df.groupby('합격여부')[['나이', '성적']].mean()) # mean() : 평균

# 3. 나이대별 평균 성적
df['나이대'] = (df['나이'] // 10) * 10
print("\n나이대별 평균 성적:")
print(df.groupby('나이대')['성적'].mean()) 
```
```
성적 기준 내림차순 정렬:
    이름  나이  성적 합격여부
3  최지은  24  96   합격
1  이영희  28  92   합격
0  김철수  25  85   합격
2  박민수  32  78  불합격

합격 여부에 따른 평균 성적과 나이:
             나이    성적
합격여부                 
불합격   32.000000  78.0
합격    25.666667  91.0

나이대별 평균 성적:
나이대
20    91.0
30    78.0
Name: 성적, dtype: float64
```
<br>

### 5. 데이터 선택과 필터링
```python
import pandas as pd

# 동일한 데이터프레임 사용
data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. 특정 열 선택
print("성적 열만 선택:")
print(df['성적'])

# 2. 여러 열 선택
print("\n이름과 성적 열 선택:")
print(df[['이름', '성적']])

# 3. 조건으로 데이터 선택
print("\n성적이 90점 이상인 학생:")
print(df[df['성적'] >= 90])
```
```python
성적 열만 선택:
0    85
1    92
2    78
3    96
Name: 성적, dtype: int64

이름과 성적 열 선택:
    이름  성적
0  김철수  85
1  이영희  92
2  박민수  78
3  최지은  96
```
- 열 선택: df['열이름']
- 여러 열 선택: df[['열1', '열2']] (대괄호 두 번)
- 조건 필터링: df[조건식]


### 6. 여러 조건을 조합하는 방법
```python
import pandas as pd

data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. AND 조건 (&)
print("성적 90점 이상이고 나이가 25세 이상인 학생:")
condition1 = (df['성적'] >= 90) & (df['나이'] >= 25)
print(df[condition1])

# 2. OR 조건 (|)
print("\n성적 95점 이상이거나 나이가 30세 이상인 학생:")
condition2 = (df['성적'] >= 95) | (df['나이'] >= 30)
print(df[condition2])

```
```python
성적 90점 이상이고 나이가 25세 이상인 학생:
    이름  나이  성적 합격여부
1  이영희  28  92   합격

성적 95점 이상이거나 나이가 30세 이상인 학생:
    이름  나이  성적 합격여부
2  박민수  32  78  불합격
3  최지은  24  96   합격
```
### 7. 데이터 수정
```python
import pandas as pd

data = {
    '이름': ['김철수', '이영희', '박민수', '최지은'],
    '나이': [25, 28, 32, 24],
    '성적': [85, 92, 78, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. 새로운 열 추가
df['학점'] = ['B', 'A', 'C', 'A']  # 직접 리스트로 추가
df['성적평가'] = df['성적'].apply(lambda x: '우수' if x >= 90 else '보통')  # 조건으로 추가

# 2. 기존 데이터 수정
df.loc[2, '합격여부'] = '합격'  # 특정 위치의 값 수정

# 3. 열 삭제
df_new = df.drop('성적평가', axis=1)  # axis=1은 열 기준 삭제

print("수정된 데이터프레임:")
print(df_new)
```
```python
수정된 데이터프레임:
    이름  나이  성적 합격여부  학점  성적평가
0  김철수  25  85   합격    B     우수
1  이영희  28  92   합격    A     우수
2  박민수  32  78  불합격    C     보통
3  최지은  24  96   합격    A     우수
```
- 열 추가: 직접 할당 또는 apply() 함수 사용
- 데이터 수정: loc[] 사용
- 열 삭제: drop() 사용 (axis=1)
<br>

### 8. 결측치(NaN) 처리
```python
import pandas as pd
import numpy as np  # NaN 사용을 위해 필요

# 결측치가 있는 데이터프레임 생성
data = {
    '이름': ['김철수', '이영희', np.nan, '최지은'],
    '나이': [25, 28, 32, None],
    '성적': [85, 92, None, 96],
    '합격여부': ['합격', '합격', '불합격', '합격']
}
df = pd.DataFrame(data)

# 1. 결측치 확인
print("결측치 확인:")
print(df.isnull().sum())  # 열별 결측치 개수

# 2. 결측치 제거
df_drop = df.dropna()  # 결측치가 있는 행 제거
print("\n결측치 제거 후:")
print(df_drop)

# 3. 결측치 대체
df_fill = df.fillna({'이름': '무명', '나이': df['나이'].mean(), '성적': df['성적'].mean()})
print("\n결측치 대체 후:")
print(df_fill)
```
```python
결측치 확인:
이름    1
나이    1
성적    1
합격여부    0
dtype: int64

결측치 제거 후:
    이름  나이  성적 합격여부
0  김철수  25  85   합격
1  이영희  28  92   합격
3  최지은  24  96   합격
```
---

여기까지가 결측치 처리 방법이다.<br>
1번 과제 가이드 학습 8가지 중, 이제 하나를 배웠다.. ㅎㅎ
