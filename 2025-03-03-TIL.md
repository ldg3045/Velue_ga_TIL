# GIT TIL 68 - Three.js ì‹¬í™” ê°œë… ì´í•´í•˜ê¸°

<br><br>

## 1. Three.jsì˜ ì• ë‹ˆë©”ì´ì…˜ê³¼ ì»¨íŠ¸ë¡¤

### 1-1. ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„
#### Three.jsì—ì„œ ì• ë‹ˆë©”ì´ì…˜ì€ requestAnimationFrameì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•©ë‹ˆë‹¤.
- ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì¥ë©´ì„ ì—…ë°ì´íŠ¸í•˜ê³  ë Œë”ë§í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•´ ë¸íƒ€ ì‹œê°„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

>ê¸°ë³¸ì ì¸ ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„:
```javascript
function animate() {
    requestAnimationFrame(animate);
    
    // ë¸íƒ€ ì‹œê°„ ê³„ì‚°
    const deltaTime = clock.getDelta();
    
    // ê°ì²´ íšŒì „
    cube.rotation.x += 0.5 * deltaTime;
    cube.rotation.y += 0.5 * deltaTime;
    
    // ë Œë”ë§
    renderer.render(scene, camera);
}

const clock = new THREE.Clock();
animate();
```

### 1-2. Controls
#### Three.jsëŠ” ë‹¤ì–‘í•œ ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ì„ ì œê³µí•©ë‹ˆë‹¤.

1. OrbitControls:
- ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì»¨íŠ¸ë¡¤
- ë§ˆìš°ìŠ¤ë¡œ ì¥ë©´ì„ íšŒì „, í™•ëŒ€/ì¶•ì†Œ, ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```javascript
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true; // ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„
controls.dampingFactor = 0.05;
controls.screenSpacePanning = false;
controls.minDistance = 1;
controls.maxDistance = 50;
controls.maxPolarAngle = Math.PI / 2;
```

2. TrackballControls:
- OrbitControlsì™€ ìœ ì‚¬í•˜ì§€ë§Œ ììœ ë¡œìš´ íšŒì „ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
```javascript
import { TrackballControls } from 'three/examples/jsm/controls/TrackballControls';

const controls = new TrackballControls(camera, renderer.domElement);
controls.rotateSpeed = 1.0;
controls.zoomSpeed = 1.2;
controls.panSpeed = 0.8;
```

<br><br>

## 2. í…ìŠ¤ì²˜ì™€ ì¬ì§ˆ ì‹¬í™”

### 2-1. í…ìŠ¤ì²˜ ë¡œë”©ê³¼ ê´€ë¦¬
#### í…ìŠ¤ì²˜ëŠ” 3D ê°ì²´ì˜ ì‹œê°ì  í’ˆì§ˆì„ ë†’ì´ëŠ” ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.

1. í…ìŠ¤ì²˜ ë¡œë”:
```javascript
const textureLoader = new THREE.TextureLoader();
const texture = textureLoader.load(
    'texture.jpg',
    function (texture) {
        // ë¡œë”© ì™„ë£Œ
        console.log('í…ìŠ¤ì²˜ ë¡œë”© ì™„ë£Œ');
    },
    function (xhr) {
        // ë¡œë”© ì§„í–‰ë¥ 
        console.log((xhr.loaded / xhr.total * 100) + '% ë¡œë”©ë¨');
    },
    function (error) {
        // ì—ëŸ¬ ì²˜ë¦¬
        console.error('í…ìŠ¤ì²˜ ë¡œë”© ì‹¤íŒ¨');
    }
);
```

2. í…ìŠ¤ì²˜ ì†ì„± ì„¤ì •:
```javascript
texture.wrapS = THREE.RepeatWrapping;
texture.wrapT = THREE.RepeatWrapping;
texture.repeat.set(2, 2); // í…ìŠ¤ì²˜ ë°˜ë³µ
texture.offset.set(0.5, 0.5); // í…ìŠ¤ì²˜ ì˜¤í”„ì…‹
texture.rotation = Math.PI / 4; // í…ìŠ¤ì²˜ íšŒì „
```

### 2-2. ê³ ê¸‰ ì¬ì§ˆ ê¸°ë²•
#### PBR(Physically Based Rendering) ì¬ì§ˆì„ í™œìš©í•œ í˜„ì‹¤ì ì¸ ë Œë”ë§:

1. í™˜ê²½ ë§µ ì„¤ì •:
```javascript
const envMapLoader = new THREE.CubeTextureLoader();
const envMap = envMapLoader.load([
    'px.jpg', 'nx.jpg',
    'py.jpg', 'ny.jpg',
    'pz.jpg', 'nz.jpg'
]);
scene.background = envMap;
```

2. ë¬¼ë¦¬ ê¸°ë°˜ ì¬ì§ˆ ì„¤ì •:
```javascript
const material = new THREE.MeshPhysicalMaterial({
    color: 0xffffff,
    metalness: 0.9,
    roughness: 0.1,
    envMap: envMap,
    envMapIntensity: 1.0,
    clearcoat: 0.5,
    clearcoatRoughness: 0.1
});
```

<br><br>

## 3. ê³ ê¸‰ ë Œë”ë§ ê¸°ë²•

### 3-1. í›„ì²˜ë¦¬ íš¨ê³¼
#### EffectComposerë¥¼ ì‚¬ìš©í•œ ë‹¤ì–‘í•œ í›„ì²˜ë¦¬ íš¨ê³¼ êµ¬í˜„:

1. ê¸°ë³¸ ì„¤ì •:
```javascript
import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';
import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';
import { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';

const composer = new EffectComposer(renderer);
const renderPass = new RenderPass(scene, camera);
composer.addPass(renderPass);
```

2. ë¸”ë£¸ íš¨ê³¼ ì¶”ê°€:
```javascript
const bloomPass = new UnrealBloomPass(
    new THREE.Vector2(window.innerWidth, window.innerHeight),
    1.5, // ê°•ë„
    0.4, // ë°˜ê²½
    0.85 // ì„ê³„ê°’
);
composer.addPass(bloomPass);
```

### 3-2. ê·¸ë¦¼ì ê³ ê¸‰ ì„¤ì •
#### ê³ í’ˆì§ˆ ê·¸ë¦¼ì êµ¬í˜„:

1. ê¸°ë³¸ ì„¤ì •:
```javascript
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;

// ê·¸ë¦¼ìë¥¼ ë°›ì„ ê°ì²´
plane.receiveShadow = true;

// ê·¸ë¦¼ìë¥¼ ë§Œë“¤ ê°ì²´
sphere.castShadow = true;
```

2. ê·¸ë¦¼ì í’ˆì§ˆ í–¥ìƒ:
```javascript
directionalLight.shadow.mapSize.width = 2048;
directionalLight.shadow.mapSize.height = 2048;
directionalLight.shadow.camera.near = 0.5;
directionalLight.shadow.camera.far = 500;
directionalLight.shadow.bias = -0.0001;
```

<br><br>

## 4. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ê³¼ ë””ë²„ê¹…

### 4-1. Stats.jsë¥¼ í™œìš©í•œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```javascript
import Stats from 'three/examples/jsm/libs/stats.module';

const stats = new Stats();
document.body.appendChild(stats.dom);

function animate() {
    stats.begin();
    // ë Œë”ë§ ì½”ë“œ
    stats.end();
    requestAnimationFrame(animate);
}
```

### 4-2. ë””ë²„ê¹… ë„êµ¬
#### Three.js Inspector í¬ë¡¬ í™•ì¥ í”„ë¡œê·¸ë¨ í™œìš©:
- ì¥ë©´ êµ¬ì¡° í™•ì¸
- ê°ì²´ ì†ì„± ì‹¤ì‹œê°„ ìˆ˜ì •
- ì„±ëŠ¥ ë³‘ëª© ì§€ì  íŒŒì•…

<br><br>

## ğŸ”— ì¶”ê°€ í•™ìŠµ ìë£Œ
- [Three.js Journey](https://threejs-journey.com/)
- [Three.js Examples](https://threejs.org/examples/)
- [WebGL Fundamentals](https://webglfundamentals.org/)
- [Shader Programming Guide](https://thebookofshaders.com/)

<br><br>

---
